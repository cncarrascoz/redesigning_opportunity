{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 15, "column": 0}, "map": {"version":3,"sources":["file:///Users/mahiarahman/Documents/Harvard/classes/cs1060/hw8/redesigning_opportunity/src/components/Navbar.tsx"],"sourcesContent":["'use client'\n\nimport Link from 'next/link'\nimport { RefObject } from 'react'\n\ninterface NavbarProps {\n  progressBarRef: RefObject<HTMLDivElement>\n}\n\nexport default function Navbar({ progressBarRef }: NavbarProps) {\n  return (\n    <header className=\"fixed top-0 left-0 w-full bg-white z-50\">\n      <nav className=\"w-full mx-auto px-4 sm:px-6 lg:px-8\">\n        <div className=\"flex justify-between items-center h-16\">\n          <div className=\"text-primary text-3xl font-bold pl-4 md:pl-10\">Opportunity AI</div>\n          <div className=\"hidden md:flex space-x-8 pr-4 md:pr-10\">\n            <Link href=\"#welcome\" className=\"hover:text-primary transition-colors\">Welcome</Link>\n            <Link href=\"#quiz-section\" className=\"hover:text-primary transition-colors\">Assess</Link>\n            <Link href=\"#opportunity-map\" className=\"hover:text-primary transition-colors\">Opportunity Map</Link>\n            <Link href=\"#take-action\" className=\"hover:text-primary transition-colors\">Take Action</Link>\n            <Link href=\"#next-steps\" className=\"hover:text-primary transition-colors\">Next Steps</Link>\n            <Link href=\"#community-connections\" className=\"hover:text-primary transition-colors\">Community</Link>\n          </div>\n        </div>\n      </nav>\n      <div className=\"h-0.5 w-full bg-gray-100\">\n        <div className=\"h-full bg-primary w-0\" ref={progressBarRef}></div>\n      </div>\n    </header>\n  )\n}"],"names":[],"mappings":";;;;AAEA;AAFA;;;AASe,SAAS,OAAO,EAAE,cAAc,EAAe;IAC5D,qBACE,8OAAC;QAAO,WAAU;;0BAChB,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAI,WAAU;sCAAgD;;;;;;sCAC/D,8OAAC;4BAAI,WAAU;;8CACb,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAW,WAAU;8CAAuC;;;;;;8CACvE,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAgB,WAAU;8CAAuC;;;;;;8CAC5E,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAmB,WAAU;8CAAuC;;;;;;8CAC/E,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAe,WAAU;8CAAuC;;;;;;8CAC3E,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAc,WAAU;8CAAuC;;;;;;8CAC1E,8OAAC,4JAAA,CAAA,UAAI;oCAAC,MAAK;oCAAyB,WAAU;8CAAuC;;;;;;;;;;;;;;;;;;;;;;;0BAI3F,8OAAC;gBAAI,WAAU;0BACb,cAAA,8OAAC;oBAAI,WAAU;oBAAwB,KAAK;;;;;;;;;;;;;;;;;AAIpD"}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 142, "column": 0}, "map": {"version":3,"sources":["file:///Users/mahiarahman/Documents/Harvard/classes/cs1060/hw8/redesigning_opportunity/src/components/Welcome.tsx"],"sourcesContent":["'use client'\n\nimport { FaChevronDown } from 'react-icons/fa'\n\nconst Welcome = () => {\n  return (\n    <div id=\"welcome\" className=\"min-h-screen flex flex-col items-center justify-center text-center px-4 pt-20 pb-10\">\n      <div className=\"max-w-4xl mx-auto\">\n        <h1 className=\"text-5xl md:text-7xl font-bold text-primary mb-8\">Building Your Child&apos;s Future</h1>\n        \n        <p className=\"text-xl md:text-2xl font-semibold mb-12\">\n          A friendly guide to creating opportunities for your family!\n        </p>\n        \n        <div className=\"space-y-5 mb-16 text-lg\">\n          <p>Discover the bests places to live</p>\n          <p>Search for the best schools</p>\n          <p>Find local resources and community programs</p>\n        </div>\n        \n        <div className=\"mt-8 mb-12 space-y-2\">\n          <p className=\"text-xl font-semibold\">Let&apos;s take this journey together</p>\n          <p className=\"text-xl font-semibold\">one step at a time</p>\n        </div>\n        \n        <div \n          className=\"text-primary text-4xl mt-6 animate-bounce cursor-pointer hover:text-primary-dark transition-colors\"\n          onClick={() => {\n            const quizSection = document.getElementById('quiz-section');\n            if (quizSection) {\n              quizSection.scrollIntoView({ behavior: 'smooth' });\n            }\n          }}\n          aria-label=\"Scroll to assessment quiz\"\n          role=\"button\"\n          tabIndex={0}\n          onKeyDown={(e) => {\n            if (e.key === 'Enter' || e.key === ' ') {\n              const quizSection = document.getElementById('quiz-section');\n              if (quizSection) {\n                quizSection.scrollIntoView({ behavior: 'smooth' });\n              }\n            }\n          }}\n        >\n          {<FaChevronDown className=\"mx-auto\" />}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nexport default Welcome"],"names":[],"mappings":";;;;AAEA;AAFA;;;AAIA,MAAM,UAAU;IACd,qBACE,8OAAC;QAAI,IAAG;QAAU,WAAU;kBAC1B,cAAA,8OAAC;YAAI,WAAU;;8BACb,8OAAC;oBAAG,WAAU;8BAAmD;;;;;;8BAEjE,8OAAC;oBAAE,WAAU;8BAA0C;;;;;;8BAIvD,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;sCAAE;;;;;;sCACH,8OAAC;sCAAE;;;;;;sCACH,8OAAC;sCAAE;;;;;;;;;;;;8BAGL,8OAAC;oBAAI,WAAU;;sCACb,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;sCACrC,8OAAC;4BAAE,WAAU;sCAAwB;;;;;;;;;;;;8BAGvC,8OAAC;oBACC,WAAU;oBACV,SAAS;wBACP,MAAM,cAAc,SAAS,cAAc,CAAC;wBAC5C,IAAI,aAAa;4BACf,YAAY,cAAc,CAAC;gCAAE,UAAU;4BAAS;wBAClD;oBACF;oBACA,cAAW;oBACX,MAAK;oBACL,UAAU;oBACV,WAAW,CAAC;wBACV,IAAI,EAAE,GAAG,KAAK,WAAW,EAAE,GAAG,KAAK,KAAK;4BACtC,MAAM,cAAc,SAAS,cAAc,CAAC;4BAC5C,IAAI,aAAa;gCACf,YAAY,cAAc,CAAC;oCAAE,UAAU;gCAAS;4BAClD;wBACF;oBACF;8BAEC,cAAA,8OAAC,8IAAA,CAAA,gBAAa;wBAAC,WAAU;;;;;;;;;;;;;;;;;;;;;;AAKpC;uCAEe"}},
    {"offset": {"line": 276, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 282, "column": 0}, "map": {"version":3,"sources":["file:///Users/mahiarahman/Documents/Harvard/classes/cs1060/hw8/redesigning_opportunity/src/components/AssessQuiz.tsx"],"sourcesContent":["'use client'\nimport { useState, createContext, useContext, ReactNode } from 'react';\nimport { FaChevronDown } from 'react-icons/fa';\n\n// Define all the types we need\ntype ChildInfo = {\n  name: string;\n  gender: string;\n  age: string;\n  ethnicity: string;\n};\n\nexport type AssessData = {\n  address: string;\n  income: string;\n  country: string;\n  children: ChildInfo[];\n  opportunityScore?: number | null;\n};\n\ninterface AssessContextType {\n  data: AssessData;\n  updateData: (data: Partial<AssessData>) => void;\n  setFullData: (data: AssessData) => void;\n}\n\n// Initial default values\nconst defaultData: AssessData = {\n  address: '',\n  income: '',\n  country: '',\n  children: [],\n  opportunityScore: null\n};\n\nconst AssessContext = createContext<AssessContextType | undefined>(undefined);\n\nexport function AssessProvider({ children }: { children: ReactNode }) {\n  const [data, setData] = useState<AssessData>(defaultData);\n\n  const updateData = (newData: Partial<AssessData>) => {\n    setData(prevData => ({\n      ...prevData,\n      ...newData\n    }));\n  };\n\n  const setFullData = (newData: AssessData) => {\n    setData(newData);\n  };\n\n  return (\n    <AssessContext.Provider value={{ data, updateData, setFullData }}>\n      {children}\n    </AssessContext.Provider>\n  );\n}\n\nexport function useAssessment() {\n  const context = useContext(AssessContext);\n  if (context === undefined) {\n    throw new Error('useAssessment must be used within an AssessProvider');\n  }\n  return context;\n}\n\n// Alias for backward compatibility\nexport const usePersonalization = useAssessment;\n\n// Alias for backward compatibility\nexport { AssessProvider as PersonalizationProvider };\n\nconst AssessYourCommunity = () => {\n  const { setFullData } = useAssessment();\n  \n  // Initialize formData with ALL fields, including address\n  const [formData, setFormData] = useState<AssessData>({\n    address: '',\n    income: '',\n    country: '',\n    children: [{ name: '', gender: '', age: '', ethnicity: '' }]\n  });\n  \n  const [isSubmitting, setIsSubmitting] = useState(false);\n  const [submitSuccess, setSubmitSuccess] = useState(false);\n\n  const handleParentInfoChange = (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    setFormData(prevData => ({\n      ...prevData,\n      [name]: value\n    }));\n  };\n\n  const handleChildInfoChange = (index: number, e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) => {\n    const { name, value } = e.target;\n    const key = name.split('-')[1]; // Extract the field name (name, gender, age, ethnicity)\n    \n    setFormData(prevData => {\n      const updatedChildren = [...prevData.children];\n      updatedChildren[index] = {\n        ...updatedChildren[index],\n        [key]: value\n      };\n      \n      return {\n        ...prevData,\n        children: updatedChildren\n      };\n    });\n  };\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault();\n    setIsSubmitting(true);\n    \n    try {\n      console.log('Submitting form data:', formData);\n      \n      // Save to context for use across the site\n      setFullData(formData);\n      \n      // Make the API call\n      const response = await fetch('/api/save-family-data', { \n        method: 'POST', \n        headers: {\n          'Content-Type': 'application/json',\n        },\n        body: JSON.stringify(formData) \n      });\n      \n      const result = await response.json();\n      console.log('API response:', result);\n      \n      // Show success state\n      setSubmitSuccess(true);\n      setTimeout(() => setSubmitSuccess(false), 3000); // Show checkmark for 3 seconds\n      \n      // Scroll to the map section after a short delay to ensure data is processed\n      setTimeout(() => {\n        const mapSection = document.getElementById('opportunity-map');\n        if (mapSection) {\n          mapSection.scrollIntoView({ behavior: 'smooth' });\n        }\n      }, 300);\n    } catch (error) {\n      console.error('Error submitting form:', error);\n    } finally {\n      setIsSubmitting(false);\n    }\n  };\n\n  return (\n    <div id=\"quiz-section\" className=\"min-h-screen px-4 py-16 max-w-4xl mx-auto scroll-mt-28\">\n      <div className=\"bg-white rounded-xl shadow-lg p-8 md:p-10\">\n        <div className=\"text-center mb-10\">\n          <h2 className=\"text-3xl md:text-4xl font-bold mb-2\">Assess Your Community</h2>\n          <p className=\"text-lg text-gray-600\">Help us provide personalized guidance for your family&apos;s future</p>\n        </div>\n        \n        <form onSubmit={handleSubmit} className=\"space-y-8\">\n          {/* Parent Information Section */}\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center\">\n              <h3 className=\"text-xl font-semibold\">Parent Information</h3>\n              <div className=\"flex-grow ml-4 h-px bg-gray-200\"></div>\n            </div>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n              <div className=\"space-y-2\">\n                <label htmlFor=\"address\" className=\"block text-sm font-medium\">\n                  Address<span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"address\"\n                  name=\"address\"\n                  value={formData.address || ''}\n                  onChange={handleParentInfoChange}\n                  placeholder=\"Enter your full address\"\n                  required\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n              </div>\n              \n              <div className=\"space-y-2\">\n                <label htmlFor=\"income\" className=\"block text-sm font-medium\">\n                  Annual Household Income<span className=\"text-red-500\">*</span>\n                </label>\n                <div className=\"relative\">\n                  <select\n                    id=\"income\"\n                    name=\"income\"\n                    value={formData.income || ''}\n                    onChange={handleParentInfoChange}\n                    required\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-md appearance-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                  >\n                    <option value=\"\">Select income range</option>\n                    <option value=\"<25k\">Less than $25,000</option>\n                    <option value=\"25-50k\">$25,000 - $50,000</option>\n                    <option value=\"50-75k\">$50,000 - $75,000</option>\n                    <option value=\"75-100k\">$75,000 - $100,000</option>\n                    <option value=\">100k\">More than $100,000</option>\n                  </select>\n                  <div className=\"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none\">\n                    <FaChevronDown className=\"text-gray-400\" />\n                  </div>\n                </div>\n              </div>\n              \n              <div className=\"space-y-2\">\n                <label htmlFor=\"country\" className=\"block text-sm font-medium\">\n                  Country of Origin (Optional)\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"country\"\n                  name=\"country\"\n                  value={formData.country || ''}\n                  onChange={handleParentInfoChange}\n                  placeholder=\"Enter country\"\n                  className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent\"\n                />\n              </div>\n            </div>\n          </div>\n          \n          {/* Child Information Section */}\n          <div className=\"space-y-6\">\n            <div className=\"flex items-center\">\n              <h3 className=\"text-xl font-semibold\">Child Information</h3>\n              <div className=\"flex-grow ml-4 h-px bg-gray-200\"></div>\n            </div>\n            \n            {formData.children.map((child, index) => (\n              <div key={index} className=\"space-y-6\">\n                <h4 className=\"font-medium\">Child {index + 1}</h4>\n                \n                <div className=\"space-y-2\">\n                  <label htmlFor={`child${index}-name`} className=\"block text-sm font-medium\">\n                    Name<span className=\"text-red-500\">*</span>\n                  </label>\n                  <input\n                    type=\"text\"\n                    id={`child${index}-name`}\n                    name={`child-name`}\n                    value={child.name || ''}\n                    onChange={(e) => handleChildInfoChange(index, e)}\n                    placeholder=\"Enter child's name\"\n                    required\n                    className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent\"\n                  />\n                </div>\n                \n                <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n                  <div className=\"space-y-2\">\n                    <label htmlFor={`child${index}-gender`} className=\"block text-sm font-medium\">\n                      Gender<span className=\"text-red-500\">*</span>\n                    </label>\n                    <div className=\"relative\">\n                      <select\n                        id={`child${index}-gender`}\n                        name={`child-gender`}\n                        value={child.gender || ''}\n                        onChange={(e) => handleChildInfoChange(index, e)}\n                        required\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-md appearance-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                      >\n                        <option value=\"\">Select gender</option>\n                        <option value=\"M\">Male</option>\n                        <option value=\"F\">Female</option>\n                      </select>\n                      <div className=\"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none\">\n                        <FaChevronDown className=\"text-gray-400\" />\n                      </div>\n                    </div>\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <label htmlFor={`child${index}-age`} className=\"block text-sm font-medium\">\n                      Age<span className=\"text-red-500\">*</span>\n                    </label>\n                    <input\n                      type=\"number\"\n                      id={`child${index}-age`}\n                      name={`child-age`}\n                      value={child.age || ''}\n                      onChange={(e) => handleChildInfoChange(index, e)}\n                      placeholder=\"Enter age\"\n                      min=\"0\"\n                      max=\"18\"\n                      required\n                      className=\"w-full px-4 py-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-primary focus:border-transparent\"\n                    />\n                  </div>\n                  \n                  <div className=\"space-y-2\">\n                    <label htmlFor={`child${index}-ethnicity`} className=\"block text-sm font-medium\">\n                      Ethnicity<span className=\"text-red-500\">*</span>\n                    </label>\n                    <div className=\"relative\">\n                      <select\n                        id={`child${index}-ethnicity`}\n                        name={`child-ethnicity`}\n                        value={child.ethnicity || ''}\n                        onChange={(e) => handleChildInfoChange(index, e)}\n                        required\n                        className=\"w-full px-4 py-2 border border-gray-300 rounded-md appearance-none focus:ring-2 focus:ring-primary focus:border-transparent\"\n                      >\n                        <option value=\"\">Select ethnicity</option>\n                        <option value=\"W\">White</option>\n                        <option value=\"B\">Black</option>\n                        <option value=\"H\">Hispanic</option>\n                        <option value=\"A\">Asian</option>\n                        <option value=\"NA\">Native American</option>\n                      </select>\n                      <div className=\"absolute inset-y-0 right-0 flex items-center px-2 pointer-events-none\">\n                        <FaChevronDown className=\"text-gray-400\" />\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ))}\n            \n            {/* Add Child Button */}\n            <div>\n              <button\n                type=\"button\"\n                onClick={() => setFormData(prev => ({\n                  ...prev,\n                  children: [...prev.children, { name: '', gender: '', age: '', ethnicity: '' }]\n                }))}\n                className=\"text-primary hover:text-primary-dark font-medium\"\n              >\n                + Add another child\n              </button>\n            </div>\n          </div>\n          \n          {/* No separate success message - using checkmark next to button */}\n          \n          {/* Submit Button */}\n          <div className=\"flex justify-center mt-10\">\n            <div className=\"relative inline-flex items-center\">\n              <button\n                type=\"submit\"\n                disabled={isSubmitting}\n                className={`bg-primary hover:bg-opacity-90 text-white py-3 px-12 rounded-full font-medium text-lg transition-all ${\n                  isSubmitting ? 'opacity-70 cursor-not-allowed' : ''\n                }`}\n              >\n                {isSubmitting ? (\n                  <span className=\"flex items-center justify-center\">\n                    <svg className=\"animate-spin -ml-1 mr-3 h-5 w-5 text-white\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n                      <circle className=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" strokeWidth=\"4\"></circle>\n                      <path className=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n                    </svg>\n                    Submitting...\n                  </span>\n                ) : 'Submit'}\n              </button>\n              \n              {/* Success Checkmark */}\n              {submitSuccess && (\n                <div className=\"ml-4 flex-shrink-0 w-8 h-8 rounded-full bg-primary flex items-center justify-center\">\n                  <svg className=\"w-5 h-5 text-white\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth=\"2\" d=\"M5 13l4 4L19 7\"></path>\n                  </svg>\n                </div>\n              )}\n            </div>\n          </div>\n        </form>\n      </div>\n    </div>\n  );\n};\n\nexport default AssessYourCommunity;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1170, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1176, "column": 0}, "map": {"version":3,"sources":["file:///Users/mahiarahman/Documents/Harvard/classes/cs1060/hw8/redesigning_opportunity/src/utils/geocodingUtils.ts"],"sourcesContent":["/**\n * Utility functions for geocoding addresses and finding census tracts\n */\n\n/**\n * Geocodes an address to get its coordinates\n * @param address - The address to geocode\n * @returns Promise with the coordinates {lng, lat} or null if geocoding fails\n */\nexport const geocodeAddress = async (address: string): Promise<{lng: number, lat: number} | null> => {\n  if (!address || address.trim() === '') {\n    console.log('No address provided for geocoding');\n    return null;\n  }\n\n  try {\n    // Using Mapbox Geocoding API\n    const encodedAddress = encodeURIComponent(address);\n    const accessToken = 'pk.eyJ1IjoibWFoaWFyIiwiYSI6ImNtNDY1YnlwdDB2Z2IybHEwd2w3MHJvb3cifQ.wJqnzFFTwLFwYhiPG3SWJA';\n    const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodedAddress}.json?access_token=${accessToken}&country=us&limit=1`;\n    \n    console.log('Geocoding request URL:', url);\n    \n    const response = await fetch(url);\n    if (!response.ok) {\n      console.error(`Geocoding API error: ${response.status} ${response.statusText}`);\n      return null;\n    }\n    \n    // Check content type to ensure we're getting JSON\n    const contentType = response.headers.get('content-type');\n    if (!contentType || !contentType.includes('application/json')) {\n      console.error(`Unexpected content type: ${contentType}`);\n      return null;\n    }\n    \n    // Parse response as text first to handle potential JSON parsing errors\n    const responseText = await response.text();\n    \n    // Try to parse the JSON\n    let data;\n    try {\n      data = JSON.parse(responseText);\n    } catch (parseError) {\n      console.error('Failed to parse JSON response:', parseError);\n      console.error('Response text:', responseText.substring(0, 200) + '...');\n      return null;\n    }\n    \n    if (data.features && data.features.length > 0) {\n      const [lng, lat] = data.features[0].center;\n      console.log(`Geocoded ${address} to coordinates:`, { lng, lat });\n      return { lng, lat };\n    } else {\n      console.log('No geocoding results found for address:', address);\n      return null;\n    }\n  } catch (error) {\n    console.error('Error geocoding address:', error);\n    return null;\n  }\n};\n\n/**\n * Finds the census tract containing the given coordinates\n * @param map - The Mapbox GL map instance\n * @param coordinates - The coordinates {lng, lat}\n * @param sourceLayer - The source layer name for census tracts\n * @returns The census tract feature or null if not found\n */\nexport const findCensusTract = (\n  map: mapboxgl.Map,\n  coordinates: {lng: number, lat: number}\n  // sourceLayer parameter removed as it was unused\n): mapboxgl.MapboxGeoJSONFeature | null => {\n  try {\n    // Query the map for features at the given point\n    const point = map.project([coordinates.lng, coordinates.lat]);\n    const features = map.queryRenderedFeatures(point, {\n      layers: ['census-tracts-layer']\n    });\n    \n    if (features && features.length > 0) {\n      return features[0];\n    }\n    \n    return null;\n  } catch (error) {\n    console.error('Error finding census tract:', error);\n    return null;\n  }\n};\n\n/**\n * Zooms and highlights a census tract on the map\n * @param map - The Mapbox GL map instance\n * @param tractId - The census tract ID (GEOID)\n * @param sourceLayer - The source layer name for census tracts\n */\nexport const highlightCensusTract = (\n  map: mapboxgl.Map,\n  tractId: string\n): void => {\n  try {\n    // Set the filter to highlight the tract\n    if (map.getLayer('census-tracts-hover')) {\n      map.setFilter('census-tracts-hover', ['==', 'GEOID', tractId]);\n    }\n  } catch (error) {\n    console.error('Error highlighting census tract:', error);\n  }\n};\n"],"names":[],"mappings":"AAAA;;CAEC,GAED;;;;CAIC;;;;;AACM,MAAM,iBAAiB,OAAO;IACnC,IAAI,CAAC,WAAW,QAAQ,IAAI,OAAO,IAAI;QACrC,QAAQ,GAAG,CAAC;QACZ,OAAO;IACT;IAEA,IAAI;QACF,6BAA6B;QAC7B,MAAM,iBAAiB,mBAAmB;QAC1C,MAAM,cAAc;QACpB,MAAM,MAAM,CAAC,kDAAkD,EAAE,eAAe,mBAAmB,EAAE,YAAY,mBAAmB,CAAC;QAErI,QAAQ,GAAG,CAAC,0BAA0B;QAEtC,MAAM,WAAW,MAAM,MAAM;QAC7B,IAAI,CAAC,SAAS,EAAE,EAAE;YAChB,QAAQ,KAAK,CAAC,CAAC,qBAAqB,EAAE,SAAS,MAAM,CAAC,CAAC,EAAE,SAAS,UAAU,EAAE;YAC9E,OAAO;QACT;QAEA,kDAAkD;QAClD,MAAM,cAAc,SAAS,OAAO,CAAC,GAAG,CAAC;QACzC,IAAI,CAAC,eAAe,CAAC,YAAY,QAAQ,CAAC,qBAAqB;YAC7D,QAAQ,KAAK,CAAC,CAAC,yBAAyB,EAAE,aAAa;YACvD,OAAO;QACT;QAEA,uEAAuE;QACvE,MAAM,eAAe,MAAM,SAAS,IAAI;QAExC,wBAAwB;QACxB,IAAI;QACJ,IAAI;YACF,OAAO,KAAK,KAAK,CAAC;QACpB,EAAE,OAAO,YAAY;YACnB,QAAQ,KAAK,CAAC,kCAAkC;YAChD,QAAQ,KAAK,CAAC,kBAAkB,aAAa,SAAS,CAAC,GAAG,OAAO;YACjE,OAAO;QACT;QAEA,IAAI,KAAK,QAAQ,IAAI,KAAK,QAAQ,CAAC,MAAM,GAAG,GAAG;YAC7C,MAAM,CAAC,KAAK,IAAI,GAAG,KAAK,QAAQ,CAAC,EAAE,CAAC,MAAM;YAC1C,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,QAAQ,gBAAgB,CAAC,EAAE;gBAAE;gBAAK;YAAI;YAC9D,OAAO;gBAAE;gBAAK;YAAI;QACpB,OAAO;YACL,QAAQ,GAAG,CAAC,2CAA2C;YACvD,OAAO;QACT;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO;IACT;AACF;AASO,MAAM,kBAAkB,CAC7B,KACA;IAGA,IAAI;QACF,gDAAgD;QAChD,MAAM,QAAQ,IAAI,OAAO,CAAC;YAAC,YAAY,GAAG;YAAE,YAAY,GAAG;SAAC;QAC5D,MAAM,WAAW,IAAI,qBAAqB,CAAC,OAAO;YAChD,QAAQ;gBAAC;aAAsB;QACjC;QAEA,IAAI,YAAY,SAAS,MAAM,GAAG,GAAG;YACnC,OAAO,QAAQ,CAAC,EAAE;QACpB;QAEA,OAAO;IACT,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,+BAA+B;QAC7C,OAAO;IACT;AACF;AAQO,MAAM,uBAAuB,CAClC,KACA;IAEA,IAAI;QACF,wCAAwC;QACxC,IAAI,IAAI,QAAQ,CAAC,wBAAwB;YACvC,IAAI,SAAS,CAAC,uBAAuB;gBAAC;gBAAM;gBAAS;aAAQ;QAC/D;IACF,EAAE,OAAO,OAAO;QACd,QAAQ,KAAK,CAAC,oCAAoC;IACpD;AACF"}},
    {"offset": {"line": 1274, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1280, "column": 0}, "map": {"version":3,"sources":["file:///Users/mahiarahman/Documents/Harvard/classes/cs1060/hw8/redesigning_opportunity/src/components/NeighborhoodAnalysis.tsx"],"sourcesContent":["'use client';\n\nimport React from 'react';\nimport { FaSchool, FaShieldAlt, FaHospital, FaStore, FaHome } from 'react-icons/fa';\nimport { MdDirectionsBus } from 'react-icons/md';\n\n// Define interfaces for neighborhood data\nexport interface CategoryData {\n  score: number;\n  description: string;\n  details: string[];\n}\n\nexport interface NeighborhoodData {\n  schoolQuality: CategoryData;\n  safety: CategoryData;\n  healthcare: CategoryData;\n  amenities: CategoryData;\n  housing: CategoryData;\n  transportation: CategoryData;\n  [key: string]: CategoryData; // Index signature for dynamic access\n}\n\ninterface NeighborhoodAnalysisProps {\n  insightsData: NeighborhoodData | null;\n  loadingInsights: boolean;\n  opportunityScore: number | null;\n  loadingOpportunityScore?: boolean;\n}\n\nconst NeighborhoodAnalysis: React.FC<NeighborhoodAnalysisProps> = ({ \n  insightsData, \n  loadingInsights, \n  opportunityScore, \n  loadingOpportunityScore = false \n}) => {\n  // Define the categories for neighborhood insights\n  const categories = [\n    { id: 'schoolQuality', name: 'School Quality', icon: <FaSchool size={20} /> },\n    { id: 'safety', name: 'Safety', icon: <FaShieldAlt size={20} /> },\n    { id: 'healthcare', name: 'Healthcare', icon: <FaHospital size={20} /> },\n    { id: 'amenities', name: 'Amenities', icon: <FaStore size={20} /> },\n    { id: 'housing', name: 'Housing', icon: <FaHome size={20} /> },\n    { id: 'transportation', name: 'Transportation', icon: <MdDirectionsBus size={20} /> }\n  ];\n\n  return (\n    <div className=\"bg-white rounded-xl shadow-lg p-6 h-full flex flex-col\">\n      <h3 className=\"text-xl font-semibold mb-4\">Neighborhood Analysis</h3>\n      \n      {(!insightsData && opportunityScore === null) ? (\n        <div className=\"flex justify-center items-center flex-grow\">\n          <p className=\"text-gray-500\">Enter your address to see neighborhood analysis</p>\n        </div>\n      ) : (\n        <div className=\"flex-grow flex flex-col\">\n          {/* Opportunity Score */}\n          <div className=\"mb-8 border-b border-gray-200 pb-6\">\n            <h4 className=\"text-lg font-semibold mb-4\">Your Opportunity Score</h4>\n            <div className=\"flex items-center\">\n              {loadingOpportunityScore ? (\n                <div className=\"flex items-center\">\n                  <div className=\"relative mr-4\">\n                    <div className=\"relative flex flex-col items-center justify-center w-16 h-16 bg-white rounded-full shadow-lg border-4 border-gray-200 z-10\">\n                      <div className=\"inline-block h-6 w-6 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]\"></div>\n                    </div>\n                  </div>\n                  <div className=\"flex-grow\">\n                    <p className=\"text-sm text-gray-600\">\n                      Loading opportunity score...\n                    </p>\n                  </div>\n                </div>\n              ) : opportunityScore !== null ? (\n                <div className=\"flex items-center\">\n                  <div className=\"relative mr-4\">\n                    <div className=\"absolute w-24 h-24 bg-primary bg-opacity-10 rounded-full animate-pulse\"></div>\n                    <div className=\"relative flex flex-col items-center justify-center w-20 h-20 bg-white rounded-full shadow-lg border-4 border-primary z-10\">\n                      <span \n                        className=\"text-2xl font-bold\" \n                        style={{ color: '#6CD9CA' }}\n                      >\n                        {Math.round(opportunityScore)}/10\n                      </span>\n                    </div>\n                  </div>\n                  <div className=\"flex-grow\">\n                    <p className=\"text-sm text-gray-600\">\n                      This score represents the economic mobility potential for children in this area.\n                    </p>\n                  </div>\n                </div>\n              ) : (\n                <div className=\"flex items-center\">\n                  <div className=\"relative mr-4\">\n                    <div className=\"relative flex flex-col items-center justify-center w-16 h-16 bg-white rounded-full shadow-lg border-4 border-gray-200 z-10\">\n                      <span className=\"text-2xl font-bold text-gray-300\">--</span>\n                    </div>\n                  </div>\n                  <div className=\"flex-grow\">\n                    <p className=\"text-sm text-gray-600\">\n                      Enter your address to see your opportunity score.\n                    </p>\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n          \n          {/* Neighborhood Insights Bar Graph */}\n          {loadingInsights ? (\n            <div>\n              <h4 className=\"text-lg font-semibold mb-4\">Neighborhood Factors</h4>\n              <div className=\"flex flex-col items-center justify-center py-8\">\n                <div className=\"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-primary border-r-transparent align-[-0.125em] motion-reduce:animate-[spin_1.5s_linear_infinite]\"></div>\n                <p className=\"mt-4 text-sm text-gray-500\">Loading neighborhood insights...</p>\n              </div>\n            </div>\n          ) : insightsData ? (\n            <div>\n              <h4 className=\"text-lg font-semibold mb-4\">Neighborhood Factors</h4>\n              <div>\n                {categories.map((category) => {\n                  const score = insightsData[category.id].score;\n                  const filledIcons = Math.round(score);\n                  \n                  return (\n                    <div key={category.id} className=\"mb-5\">\n                      <div className=\"flex items-center mb-1\">\n                        <span className=\"text-sm font-medium\">{category.name}</span>\n                        <span className=\"ml-auto text-sm font-semibold\">{Math.round(score)}/10</span>\n                      </div>\n                      <div className=\"flex space-x-1\">\n                        {[...Array(10)].map((_, index) => (\n                          <div \n                            key={index} \n                            className={`${index < filledIcons ? 'text-primary' : 'text-gray-200'}`}\n                          >\n                            {category.icon}\n                          </div>\n                        ))}\n                      </div>\n                    </div>\n                  );\n                })}\n              </div>\n            </div>\n          ) : null}\n          \n          {/* No additional information section */}\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default NeighborhoodAnalysis;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1695, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 1701, "column": 0}, "map": {"version":3,"sources":["file:///Users/mahiarahman/Documents/Harvard/classes/cs1060/hw8/redesigning_opportunity/src/components/OpportunityMap.tsx"],"sourcesContent":["'use client'\n\nimport React, { useEffect, useRef, useState } from 'react';\nimport mapboxgl from 'mapbox-gl';\nimport 'mapbox-gl/dist/mapbox-gl.css';\nimport { geocodeAddress } from '../utils/geocodingUtils';\nimport { usePersonalization } from './AssessQuiz';\nimport NeighborhoodAnalysis, { NeighborhoodData } from './NeighborhoodAnalysis';\n\n// Helper function to calculate opportunity score based on household income\nconst calculateOpportunityScore = (income: number): number => {\n  // Convert income to a score from 1-10 based on the map colors\n  // This matches the fill-color scale used in the map layer\n  if (income <= 10000) return 1;\n  if (income <= 25000) return 2;\n  if (income <= 28000) return 3;\n  if (income <= 30000) return 4;\n  if (income <= 32000) return 5;\n  if (income <= 34000) return 6;\n  if (income <= 36000) return 7;\n  if (income <= 38000) return 8;\n  if (income <= 41000) return 9;\n  if (income <= 45000) return 10;\n  return 10;\n};\n\n// Set Mapbox access token\nmapboxgl.accessToken = 'pk.eyJ1IjoibWFoaWFyIiwiYSI6ImNtNDY1YnlwdDB2Z2IybHEwd2w3MHJvb3cifQ.wJqnzFFTwLFwYhiPG3SWJA';\n\n// Define GeoJSON types for TypeScript\ntype Geometry = GeoJSON.Geometry;\n\n// Define the interface for census tract data\ninterface TractData {\n  GEOID?: string;\n  GEO_ID?: string;\n  Household_Income_at_Age_35_rP_gP_p25?: number;\n  [key: string]: unknown; // Allow for other properties\n}\n\n// Using NeighborhoodData interface imported from NeighborhoodInsights component\n\ninterface OpportunityMapProps {\n  address?: string;\n  isVisible?: boolean; // Prop to control visibility\n  showWrapper?: boolean; // New prop to control whether to show the surrounding UI elements\n}\n\n// This would come from an API in a real application\nconst fetchNeighborhoodData = async (address: string): Promise<NeighborhoodData> => {\n  // Simulate API call with mock data\n  // In a real app, this would fetch data from a real API based on the address\n  console.log(`Fetching neighborhood data for: ${address}`);\n  \n  // Mock data - would be replaced with real API data\n  return {\n    schoolQuality: {\n      score: 7.2,\n      description: 'Above average public schools with some specialized programs',\n      details: [\n        'Elementary School Rating: 7.5/10',\n        'Middle School Rating: 6.8/10',\n        'High School Rating: 7.3/10',\n        '82% high school graduation rate',\n        '68% college attendance rate'\n      ]\n    },\n    safety: {\n      score: 8.1,\n      description: 'Low crime rates compared to national averages',\n      details: [\n        'Violent crime: 65% below national average',\n        'Property crime: 42% below national average',\n        'Well-lit streets and active neighborhood watch',\n        'Responsive local police department'\n      ]\n    },\n    healthcare: {\n      score: 6.5,\n      description: 'Adequate healthcare facilities within reasonable distance',\n      details: [\n        '2 hospitals within 10 miles',\n        '5 primary care clinics in the area',\n        'Average wait time for appointments: 12 days',\n        'Limited pediatric specialists locally'\n      ]\n    },\n    amenities: {\n      score: 8.3,\n      description: 'Well-equipped with family-friendly amenities',\n      details: [\n        '5 parks within walking distance',\n        'Public library with children\\'s programs',\n        'Community center with youth activities',\n        'Multiple grocery stores and family restaurants'\n      ]\n    },\n    housing: {\n      score: 5.9,\n      description: 'Moderately affordable housing with some options',\n      details: [\n        'Median home price: $375,000',\n        'Average rent (3BR): $2,200/month',\n        'Limited affordable housing programs',\n        'Moderate property tax rates'\n      ]\n    },\n    transportation: {\n      score: 6.7,\n      description: 'Decent public transportation and accessibility',\n      details: [\n        'Bus routes connecting to major areas',\n        'Average commute time: 28 minutes',\n        'Limited late-night transportation options',\n        'Bike-friendly roads in most areas'\n      ]\n    }\n  };\n};\n\nconst OpportunityMap: React.FC<OpportunityMapProps> = ({ \n  address, \n  showWrapper = true \n}) => {\n  // Get the personalization context to share opportunity score\n  // Add try-catch to handle potential context errors\n  let updateData = (data: any) => {\n    console.log('Personalization context not available, skipping update:', data);\n  };\n  \n  try {\n    const context = usePersonalization();\n    if (context && context.updateData) {\n      updateData = context.updateData;\n    }\n  } catch (error) {\n    console.error('Error accessing personalization context:', error);\n  }\n  \n  const mapContainer = useRef<HTMLDivElement>(null);\n  const map = useRef<mapboxgl.Map | null>(null);\n  const [mapView] = useState<'commuting' | 'census'>('census'); // Always using census view now\n  const [selectedTract, setSelectedTract] = useState<TractData | null>(null);\n  const [mapStyleLoaded, setMapStyleLoaded] = useState(false);\n  const popupRef = useRef<mapboxgl.Popup | null>(null);\n  const [userTractId, setUserTractId] = useState<string | null>(null);\n  const [userTractGeometry, setUserTractGeometry] = useState<Geometry | null>(null);\n  const [insightsData, setInsightsData] = useState<NeighborhoodData | null>(null);\n  const [loadingInsights, setLoadingInsights] = useState(true);\n  const [loadingAddress, setLoadingAddress] = useState(false);\n\n  useEffect(() => {\n    if (map.current) return; // initialize map only once\n    if (!mapContainer.current) return;\n\n    map.current = new mapboxgl.Map({\n      container: mapContainer.current,\n      style: 'mapbox://styles/mapbox/light-v11', // Keep the light style\n      center: [-98.5795, 39.8283], // Centered on USA\n      zoom: 3,\n      projection: 'mercator',\n      renderWorldCopies: false,\n      preserveDrawingBuffer: true\n    });\n\n    // Add navigation controls\n    map.current.addControl(new mapboxgl.NavigationControl());\n\n    // Set up event listener for map loading\n    map.current.on('load', () => {\n      console.log('Map fully loaded');\n      setMapStyleLoaded(true);\n      \n      // Add sources immediately on load\n      if (map.current) {\n        try {\n          // Add streets source\n          map.current.addSource('mapbox-streets', {\n            type: 'vector',\n            url: 'mapbox://mapbox.mapbox-streets-v8'\n          });\n          \n          // Add data source\n          map.current.addSource('ct-opportunity-data', {\n            type: 'vector',\n            url: 'mapbox://mahiar.bdsxlspn'\n          });\n          \n          // Handle text labels - hide small street labels and style others\n          try {\n            // Get the map style\n            const style = map.current.getStyle();\n            if (style && style.layers) {\n              // Loop through all layers and modify text layers\n              for (let i = 0; i < style.layers.length; i++) {\n                const layer = style.layers[i];\n                \n                // Check if this is a symbol layer (text labels)\n                if (layer && layer.type === 'symbol' && layer.id) {\n                  // Hide street name labels\n                  if (layer.id.includes('road-label') || layer.id.includes('street-label')) {\n                    map.current.setLayoutProperty(layer.id, 'visibility', 'none');\n                  } else {\n                    // For other labels (cities, neighborhoods, etc.) - make them black with good contrast\n                    map.current.setPaintProperty(layer.id, 'text-color', '#000000');\n                    map.current.setPaintProperty(layer.id, 'text-opacity', 1);\n                    map.current.setPaintProperty(layer.id, 'text-halo-color', '#ffffff');\n                    map.current.setPaintProperty(layer.id, 'text-halo-width', 1.5);\n                  }\n                }\n              }\n            }\n          } catch (error) {\n            console.error('Error updating text styles:', error);\n          }\n          \n          // Add layers\n          addMapLayers('ct_tract_kfr_rP_gP_p25-8tx22d');\n        } catch (error) {\n          console.error('Error setting up map on load:', error);\n        }\n      }\n    });\n\n    // Clean up on unmount\n    return () => {\n      if (map.current) {\n        map.current.remove();\n        map.current = null;\n      }\n    };\n  }, []);\n\n  // Function to add map layers with the correct source layer\n  const addMapLayers = (sourceLayer: string) => {\n    if (!map.current) return;\n    \n    try {\n      console.log('Adding census tract fill layer with source layer:', sourceLayer);\n      \n      // Add the main fill layer for census tracts first (so it appears below the streets)\n      map.current.addLayer({\n        id: 'census-tracts-layer',\n        type: 'fill',\n        source: 'ct-opportunity-data',\n        'source-layer': sourceLayer,\n        layout: {\n          'visibility': mapView === 'census' ? 'visible' : 'none'\n        },\n        paint: {\n          'fill-color': [\n            'interpolate',\n            ['linear'],\n            ['coalesce', \n              ['get', 'Household_Income_at_Age_35_rP_gP_p25'], \n              ['get', 'household_income_at_age_35_rp_gp_p25'],\n              ['get', 'Household_Income_at_Age_35-rP_gP_p25'],\n              0\n            ],\n            10000, '#9b252f',  // <$10k - accent1 (dark red)\n            25000, '#b65441',  // 25k - accent2 (red)\n            28000, '#d07e59',  // 28k - accent3 (orange)\n            30000, '#e5a979',  // 30k - accent4 (light orange)\n            32000, '#f4d79e',  // 32k - accent5 (yellow)\n            34000, '#fcfdc1',  // 34k - accent6 (light yellow)\n            36000, '#cdddb5',  // 36k - accent7 (light green)\n            38000, '#9dbda9',  // 38k - accent8 (green)\n            41000, '#729d9d',  // 41k - accent9 (teal)\n            45000, '#4f7f8b',  // 45k - accent10 (blue)\n            60000, '#34687e'   // >$60k - accent11 (dark blue)\n          ],\n          'fill-opacity': 0.8,\n          'fill-outline-color': '#000000'\n        }\n      }, 'poi-label');\n      \n      // Detailed street layers have been removed\n      \n      // Add water bodies layer (white overlay)\n      map.current.addLayer({\n        id: 'water-bodies-layer',\n        type: 'fill',\n        source: 'mapbox-streets',\n        'source-layer': 'water',\n        layout: {\n          'visibility': 'visible'\n        },\n        paint: {\n          'fill-color': '#ffffff',  // White color for water bodies\n          'fill-opacity': 1\n        }\n      });\n      \n      // Add only major highways for orientation\n      map.current.addLayer({\n        id: 'major-highways-layer',\n        type: 'line',\n        source: 'mapbox-streets',\n        'source-layer': 'road',\n        filter: ['in', 'class', 'motorway', 'trunk'],  // Only show major highways\n        layout: {\n          'line-join': 'round',\n          'line-cap': 'round',\n          'visibility': 'visible'\n        },\n        paint: {\n          'line-color': '#ffffff',\n          'line-width': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            8, 0.5,\n            10, 0.75,\n            12, 1,\n            15, 1.5,\n            20, 2\n          ],\n          'line-opacity': 0.4  // Reduced opacity\n        }\n      });\n      \n      // Census tract outline - enhanced for better visibility\n      map.current.addLayer({\n        id: 'census-tracts-outline',\n        type: 'line',\n        source: 'ct-opportunity-data',\n        'source-layer': sourceLayer,\n        layout: {\n          'visibility': mapView === 'census' ? 'visible' : 'none'\n        },\n        paint: {\n          'line-color': '#000000',\n          'line-width': 0.75,  // Slightly thicker lines\n          'line-opacity': 0.7   // Slightly transparent\n        }\n      });\n\n      // Hover layer\n      map.current.addLayer({\n        id: 'census-tracts-hover',\n        type: 'line',\n        source: 'ct-opportunity-data',\n        'source-layer': sourceLayer,\n        layout: {\n          'visibility': mapView === 'census' ? 'visible' : 'none'\n        },\n        paint: {\n          'line-color': '#000',\n          'line-width': 3,\n          'line-opacity': 0.9\n        },\n        filter: ['==', 'GEOID', '']\n      });\n      \n      // User location source\n      map.current.addSource('user-location-source', {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          geometry: {\n            type: 'Point',\n            coordinates: [0, 0]\n          },\n          properties: {}\n        }\n      });\n      \n      // User location symbol\n      map.current.addLayer({\n        id: 'user-location-symbol',\n        type: 'circle',\n        source: 'user-location-source',\n        layout: {\n          'visibility': mapView === 'census' ? 'visible' : 'none'\n        },\n        paint: {\n          'circle-radius': 10,\n          'circle-color': '#000000',\n          'circle-stroke-width': 3,\n          'circle-stroke-color': '#ffffff'\n        }\n      });\n      \n      // User tract source\n      map.current.addSource('user-tract-source', {\n        type: 'geojson',\n        data: {\n          type: 'Feature',\n          geometry: {\n            type: 'Polygon',\n            coordinates: [[]]\n          },\n          properties: {}\n        }\n      });\n      \n      // User tract outline\n      map.current.addLayer({\n        id: 'user-tract-outline',\n        type: 'line',\n        source: 'user-tract-source',\n        layout: {\n          'visibility': mapView === 'census' ? 'visible' : 'none'\n        },\n        paint: {\n          'line-color': '#000000',\n          'line-width': [\n            'interpolate',\n            ['linear'],\n            ['zoom'],\n            8, 3,\n            10, 5,\n            12, 8,\n            14, 12\n          ]\n        }\n      });\n      \n      // Log feature properties if available\n      try {\n        const features = map.current.querySourceFeatures('ct-opportunity-data', {\n          sourceLayer: sourceLayer,\n          validate: false\n        });\n        \n        if (features && features.length > 0) {\n          console.log('Example feature properties:', features[0].properties);\n          // Add null check before calling Object.keys\n          if (features[0].properties) {\n            console.log('Available property keys:', Object.keys(features[0].properties));\n          } else {\n            console.log('Feature properties is null');\n          }\n        } else {\n          console.log('No features found in source');\n        }\n      } catch (err) {\n        console.log('Could not query source features:', err);\n      }\n      \n      // Add event handlers\n      addEventHandlers();\n      \n      console.log('Successfully added layers with source layer:', sourceLayer);\n    } catch (error) {\n      console.error('Error adding map layers:', error);\n    }\n  };\n  \n  // Function to add event handlers to the map layers\n  const addEventHandlers = () => {\n    if (!map.current) return;\n    \n    // Function to handle feature click\n    const handleFeatureClick = (e: mapboxgl.MapLayerMouseEvent) => {\n      if (e.features && e.features.length > 0) {\n        const feature = e.features[0];\n        const properties = feature.properties || {};\n        console.log('Clicked feature properties:', properties);\n        setSelectedTract(properties);\n        \n        // Update the hover layer to highlight the selected tract\n        if (map.current?.getLayer('census-tracts-hover')) {\n          // Check if GEOID exists and is a valid value before using it\n          const geoid = properties.GEOID || properties.GEO_ID || '';\n          if (geoid) {\n            map.current.setFilter('census-tracts-hover', ['==', 'GEOID', geoid]);\n            \n            // Keep the user's tract highlighted if it exists\n            if (userTractId && userTractGeometry && map.current.getSource('user-tract-source')) {\n              (map.current.getSource('user-tract-source') as mapboxgl.GeoJSONSource).setData({\n                type: 'Feature',\n                geometry: userTractGeometry,\n                properties: {}\n              });\n            }\n          } else {\n            // Reset filter if no valid GEOID is found\n            map.current.setFilter('census-tracts-hover', ['==', 'GEOID', '']);\n          }\n        }\n        \n        // Log properties to help debug\n        console.log('Feature properties for popup:', properties);\n        \n        // Calculate opportunity score and update context\n        if (properties.Household_Income_at_Age_35_rP_gP_p25) {\n          const income = properties.Household_Income_at_Age_35_rP_gP_p25;\n          const opportunityScore = calculateOpportunityScore(income).toString();\n          \n          // Share the opportunity score with other components through context\n          // This ensures the Learn component gets updated when a new tract is clicked\n          updateData({\n            opportunityScore: parseInt(opportunityScore),\n            income: income.toString()\n          });\n        }\n        \n        // Remove any existing popup\n        if (popupRef.current) {\n          popupRef.current.remove();\n          popupRef.current = null;\n        }\n      }\n    };\n    \n    // Add click events for the layers\n    map.current.on('click', 'census-tracts-layer', handleFeatureClick);\n    \n    // Setup cursor behavior for the layer\n    map.current.on('mouseenter', 'census-tracts-layer', () => {\n      if (map.current) map.current.getCanvas().style.cursor = 'pointer';\n    });\n    \n    map.current.on('mouseleave', 'census-tracts-layer', () => {\n      if (map.current) map.current.getCanvas().style.cursor = '';\n    });\n  };\n  \n  // Update layer visibility when mapView changes\n  useEffect(() => {\n    if (!map.current || !mapStyleLoaded) return;\n    \n    // Check if layers exist\n    const hasLayers = map.current.getLayer('census-tracts-layer') && \n                     map.current.getLayer('census-tracts-outline') && \n                     map.current.getLayer('census-tracts-hover');\n    \n    if (hasLayers) {\n      // Update layer visibility based on the current view\n      map.current.setLayoutProperty(\n        'census-tracts-layer', \n        'visibility', \n        mapView === 'census' ? 'visible' : 'none'\n      );\n      map.current.setLayoutProperty(\n        'census-tracts-outline', \n        'visibility', \n        mapView === 'census' ? 'visible' : 'none'\n      );\n      map.current.setLayoutProperty(\n        'census-tracts-hover', \n        'visibility', \n        mapView === 'census' ? 'visible' : 'none'\n      );\n      \n      // Also update user tract outline visibility\n      if (map.current.getLayer('user-tract-outline')) {\n        map.current.setLayoutProperty(\n          'user-tract-outline',\n          'visibility',\n          mapView === 'census' ? 'visible' : 'none'\n        );\n      }\n      \n      if (map.current.getLayer('user-location-symbol')) {\n        map.current.setLayoutProperty(\n          'user-location-symbol',\n          'visibility',\n          mapView === 'census' ? 'visible' : 'none'\n        );\n      }\n      \n      // Make streets more visible when in census view\n      if (map.current.getLayer('streets-layer')) {\n        map.current.setPaintProperty(\n          'streets-layer',\n          'line-opacity',\n          mapView === 'census' ? 0.9 : 0.5\n        );\n      }\n      \n      if (map.current.getLayer('major-streets-layer')) {\n        map.current.setPaintProperty(\n          'major-streets-layer',\n          'line-opacity',\n          mapView === 'census' ? 0.9 : 0.5\n        );\n      }\n    } else if (mapStyleLoaded && map.current) {\n      // If layers don't exist yet but map is loaded, try adding them directly\n      try {\n        // Add streets source\n        if (!map.current.getSource('mapbox-streets')) {\n          map.current.addSource('mapbox-streets', {\n            type: 'vector',\n            url: 'mapbox://mapbox.mapbox-streets-v8'\n          });\n        }\n        \n        // Add data source\n        if (!map.current.getSource('ct-opportunity-data')) {\n          map.current.addSource('ct-opportunity-data', {\n            type: 'vector',\n            url: 'mapbox://mahiar.bdsxlspn'\n          });\n        }\n        \n        // Add layers\n        addMapLayers('ct_tract_kfr_rP_gP_p25-8tx22d');\n      } catch (error) {\n        console.error('Error setting up map sources and layers:', error);\n      }\n    }\n    \n    // Clear any selected tract when switching views\n    if (mapView !== 'census') {\n      setSelectedTract(null);\n      if (popupRef.current) popupRef.current.remove();\n    }\n  }, [mapView, mapStyleLoaded]);\n\n  // Effect to load neighborhood insights data when address changes\n  useEffect(() => {\n    const getNeighborhoodData = async () => {\n      if (address) {\n        setLoadingInsights(true);\n        try {\n          const neighborhoodData = await fetchNeighborhoodData(address);\n          setInsightsData(neighborhoodData);\n        } catch (error) {\n          console.error('Error fetching neighborhood data:', error);\n        } finally {\n          setLoadingInsights(false);\n        }\n      }\n    };\n\n    getNeighborhoodData();\n  }, [address]);\n\n  // Effect to handle address changes and zoom to the corresponding census tract\n  useEffect(() => {\n    const zoomToAddress = async () => {\n      // Enhanced validation for address\n      if (!address || address.trim() === '' || !map.current || !mapStyleLoaded) {\n        console.log('Skipping geocoding: Address is empty or map not ready');\n        return;\n      }\n      \n      try {\n        console.log('Geocoding address:', address);\n        setLoadingAddress(true);\n        \n        // Geocode the address to get coordinates\n        const coordinates = await geocodeAddress(address);\n        if (!coordinates) {\n          console.error('Failed to geocode address:', address);\n          setLoadingAddress(false);\n          return;\n        }\n        \n        console.log('Coordinates:', coordinates);\n        \n        // Fly to the coordinates\n        map.current.flyTo({\n          center: [coordinates.lng, coordinates.lat],\n          zoom: 12,\n          essential: true\n        });\n        \n        // Wait for the map to finish moving before querying for features\n        map.current.once('moveend', () => {\n          if (!map.current) return;\n          \n          // Find the census tract at these coordinates\n          const point = map.current.project([coordinates.lng, coordinates.lat]);\n          const features = map.current.queryRenderedFeatures(point, {\n            layers: ['census-tracts-layer']\n          });\n          \n          if (features && features.length > 0) {\n            const feature = features[0];\n            const properties = feature.properties || {};\n            console.log('Found census tract:', properties);\n            \n            // Get the tract ID\n            const tractId = properties.GEOID || properties.GEO_ID || '';\n            if (tractId) {\n              setUserTractId(tractId);\n              \n              // Highlight the tract\n              if (map.current.getLayer('census-tracts-hover')) {\n                map.current.setFilter('census-tracts-hover', ['==', 'GEOID', tractId]);\n              }\n              \n              // Store the geometry for the user's tract\n              if (feature.geometry) {\n                setUserTractGeometry(feature.geometry);\n                \n                // Update the user tract source with the new geometry\n                if (map.current.getSource('user-tract-source')) {\n                  (map.current.getSource('user-tract-source') as mapboxgl.GeoJSONSource).setData({\n                    type: 'Feature',\n                    geometry: feature.geometry,\n                    properties: {}\n                  });\n                }\n                \n                // Also update the user location point\n                if (map.current.getSource('user-location-source')) {\n                  (map.current.getSource('user-location-source') as mapboxgl.GeoJSONSource).setData({\n                    type: 'Feature',\n                    geometry: {\n                      type: 'Point',\n                      coordinates: [coordinates.lng, coordinates.lat]\n                    },\n                    properties: {}\n                  });\n                }\n              }\n              \n              // Set the selected tract to show its details\n              setSelectedTract(properties);\n              \n              // Format household income and calculate opportunity score\n              let opportunityScore = 'N/A';\n              if (properties.Household_Income_at_Age_35_rP_gP_p25) {\n                const income = properties.Household_Income_at_Age_35_rP_gP_p25;\n                opportunityScore = calculateOpportunityScore(income).toString();\n                \n                // Debug log to see the income and calculated score\n                console.log('Income:', income, 'Calculated Score:', opportunityScore);\n                console.log('Tract color info:', properties.kfr_rP_gP_p25);\n                \n                // Share the opportunity score with other components through context\n                updateData({\n                  opportunityScore: parseInt(opportunityScore),\n                  // Also store the income for reference\n                  income: income.toString()\n                });\n              }\n              \n              // Remove any existing popup\n              if (popupRef.current) {\n                popupRef.current.remove();\n                popupRef.current = null;\n              }\n            }\n          } else {\n            console.log('No census tract found at coordinates');\n          }\n        });\n      } catch (error) {\n        console.error('Error processing address:', error);\n      } finally {\n        setLoadingAddress(false);\n      }\n    };\n    \n    zoomToAddress();\n  }, [address, mapStyleLoaded]);\n\n  // Render only the map container if showWrapper is false\n  if (!showWrapper) {\n    return (\n      <div \n        ref={mapContainer} \n        className=\"h-full w-full\"\n      />\n    );\n  }\n\n  // Neighborhood insights are now handled by the NeighborhoodInsights component\n\n  // Otherwise, render the full component with surrounding UI\n  return (\n    <div id=\"opportunity-map\" className=\"min-h-screen px-4 py-16 max-w-6xl mx-auto scroll-mt-28\">\n      <div className=\"text-center mb-10\">\n        <h2 className=\"text-3xl md:text-4xl font-bold mb-2\">Opportunity Map</h2>\n        <p className=\"text-lg text-gray-600\">Explore economic mobility across different regions</p>\n      </div>\n\n      <div className=\"grid grid-cols-1 md:grid-cols-[65%_35%] gap-8 md:grid-flow-col auto-rows-fr\">\n        {/* Left side - Map Container */}\n        <div className=\"bg-white rounded-xl shadow-lg overflow-hidden flex flex-col h-full\">\n          <div \n            ref={mapContainer} \n            className=\"map-container h-[600px] flex-grow relative\"\n          />\n          \n          {/* Map Legend below the map */}\n          <div className=\"border-t border-gray-100 py-2\">\n            <div className=\"mx-auto w-[350px]\">\n              <div className=\"flex flex-col\">\n                <div className=\"text-center text-xs font-medium mb-1\">Opportunity Score (1-10)</div>\n                <div className=\"flex h-4 w-full\">\n                  <div className=\"h-full\" style={{ backgroundColor: '#9b252f', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#b65441', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#d07e59', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#e5a979', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#f4d79e', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#fcfdc1', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#cdddb5', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#9dbda9', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#729d9d', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#4f7f8b', width: '9.1%' }}></div>\n                  <div className=\"h-full\" style={{ backgroundColor: '#34687e', width: '9.1%' }}></div>\n                </div>\n                <div className=\"flex justify-between text-[10px] w-full mt-1\">\n                  <span>1</span>\n                  <span>2</span>\n                  <span>3</span>\n                  <span>4</span>\n                  <span>5</span>\n                  <span>6</span>\n                  <span>7</span>\n                  <span>8</span>\n                  <span>9</span>\n                  <span>10</span>\n                  <span>10+</span>\n                </div>\n                <div className=\"flex justify-between text-[10px] font-medium w-full mt-0.5\">\n                  <span className=\"text-[#9b252f]\">Bad</span>\n                  <span className=\"flex-grow\"></span>\n                  <span className=\"text-[#34687e]\">Good</span>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n        {/* Right side - Combined Opportunity Score and Neighborhood Insights */}\n        <div className=\"flex flex-col\">\n          {/* Combined Neighborhood Insights with Opportunity Score */}\n          <NeighborhoodAnalysis \n            insightsData={insightsData} \n            loadingInsights={loadingInsights}\n            opportunityScore={selectedTract && selectedTract.Household_Income_at_Age_35_rP_gP_p25 ? \n              calculateOpportunityScore(selectedTract.Household_Income_at_Age_35_rP_gP_p25) : null}\n            loadingOpportunityScore={loadingAddress}\n          />\n        </div>\n      </div>\n\n      {/* How can we do better section */}\n      <div className=\"mt-24 mb-16\">\n        <div className=\"text-center mb-10\">\n          <h2 className=\"text-2xl md:text-3xl font-semibold\">How can we do better?</h2>\n        </div>\n\n        <div className=\"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-5 gap-6\">\n          {/* Live in Good Areas - House icon */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-16 h-16 mb-4\">\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-full h-full\">\n                <path d=\"M10,20V14H14V20H19V12H22L12,3L2,12H5V20H10Z\" />\n              </svg>\n            </div>\n            <div className=\"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center mb-3 font-semibold\">\n              1\n            </div>\n            <h3 className=\"text-base font-semibold mb-1 text-center\">Live in Good Areas</h3>\n            <p className=\"text-sm text-center text-gray-700\">Find neighborhoods with better schools, resources, and opportunity networks</p>\n          </div>\n\n          {/* Good Education - School building icon */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-16 h-16 mb-4\">\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-full h-full\">\n                <path d=\"M12,3L1,9L12,15L21,10.09V17H23V9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z\" />\n              </svg>\n            </div>\n            <div className=\"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center mb-3 font-semibold\">\n              2\n            </div>\n            <h3 className=\"text-base font-semibold mb-1 text-center\">Good Education</h3>\n            <p className=\"text-sm text-center text-gray-700\">Access quality schools, afterschool programs, and educational resources</p>\n          </div>\n\n          {/* Take Advantage - Lightbulb/opportunity icon */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-16 h-16 mb-4\">\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-full h-full\">\n                <path d=\"M12,2A7,7 0 0,1 19,9C19,11.38 17.81,13.47 16,14.74V17A1,1 0 0,1 15,18H9A1,1 0 0,1 8,17V14.74C6.19,13.47 5,11.38 5,9A7,7 0 0,1 12,2M9,21V20H15V21A1,1 0 0,1 14,22H10A1,1 0 0,1 9,21M12,4A5,5 0 0,0 7,9C7,11.05 8.23,12.81 10,13.58V16H14V13.58C15.77,12.81 17,11.05 17,9A5,5 0 0,0 12,4Z\" />\n              </svg>\n            </div>\n            <div className=\"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center mb-3 font-semibold\">\n              3\n            </div>\n            <h3 className=\"text-base font-semibold mb-1 text-center\">Take Advantage of Opportunities</h3>\n            <p className=\"text-sm text-center text-gray-700\">Utilize mentorship, community programs, and enrichment activities</p>\n          </div>\n\n          {/* Graduate College - Graduation cap icon */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-16 h-16 mb-4\">\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-full h-full\">\n                <path d=\"M12,3L1,9L12,15L23,9M5,13.18V17.18L12,21L19,17.18V13.18L12,17L5,13.18Z\" />\n              </svg>\n            </div>\n            <div className=\"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center mb-3 font-semibold\">\n              4\n            </div>\n            <h3 className=\"text-base font-semibold mb-1 text-center\">Graduate College</h3>\n            <p className=\"text-sm text-center text-gray-700\">Higher education significantly improves lifetime earning potential</p>\n          </div>\n\n          {/* Career Success - Briefcase/professional icon */}\n          <div className=\"flex flex-col items-center\">\n            <div className=\"w-16 h-16 mb-4\">\n              <svg viewBox=\"0 0 24 24\" fill=\"currentColor\" className=\"w-full h-full\">\n                <path d=\"M20,6C20.58,6 21.05,6.2 21.42,6.59C21.8,7 22,7.45 22,8V19C22,19.55 21.8,20 21.42,20.41C21.05,20.8 20.58,21 20,21H4C3.42,21 2.95,20.8 2.58,20.41C2.2,20 2,19.55 2,19V8C2,7.45 2.2,7 2.58,6.59C2.95,6.2 3.42,6 4,6H8V4C8,3.42 8.2,2.95 8.58,2.58C8.95,2.2 9.42,2 10,2H14C14.58,2 15.05,2.2 15.42,2.58C15.8,2.95 16,3.42 16,4V6H20M4,8V19H20V8H4M14,6V4H10V6H14Z\" />\n              </svg>\n            </div>\n            <div className=\"h-8 w-8 rounded-full bg-primary text-white flex items-center justify-center mb-3 font-semibold\">\n              5\n            </div>\n            <h3 className=\"text-base font-semibold mb-1 text-center\">Career Success</h3>\n            <p className=\"text-sm text-center text-gray-700\">Build professional skills and networks for long-term financial stability</p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\n// Export a separate MapOnly component that just renders the map part\nexport const MapOnly = (props: OpportunityMapProps) => {\n  return <OpportunityMap {...props} showWrapper={false} />;\n};\n\nexport default OpportunityMap;"],"names":[],"mappings":"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"}},
    {"offset": {"line": 3119, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 3125, "column": 0}, "map": {"version":3,"sources":["file:///Users/mahiarahman/Documents/Harvard/classes/cs1060/hw8/redesigning_opportunity/src/app/page.tsx"],"sourcesContent":["'use client'\nimport { RefObject, useEffect, useRef, useState } from 'react'\nimport Navbar from '../components/Navbar'\nimport Welcome from '../components/Welcome'\nimport PersonalizationQuiz, { usePersonalization } from '../components/AssessQuiz'\nimport OpportunityMap from '../components/OpportunityMap'\nimport { PersonalizationProvider } from '../components/AssessQuiz'\n\ninterface SavedChoices {\n  town: string;\n  selectedSchool: string | null;\n  selectedCommunityPrograms: string[];\n  selectedNeighborhood?: string;\n  selectedHousingType?: string;\n}\n\nfunction Home() {\n  const progressBarRef = useRef<HTMLDivElement>(null)\n  const [isMounted, setIsMounted] = useState(false)\n  const [selectedAction, setSelectedAction] = useState<'stay' | 'move' | null>(null)\n  const [savedChoices, setSavedChoices] = useState<SavedChoices | null>(null)\n  \n  // Function to receive action and choices from TakeAction component\n  const handleActionAndChoicesSave = (action: 'stay' | 'move', choices: SavedChoices) => {\n    setSelectedAction(action)\n    setSavedChoices(choices)\n  }\n  \n  useEffect(() => {\n    setIsMounted(true)\n    \n    const handleScroll = () => {\n      const totalScroll = document.documentElement.scrollHeight - window.innerHeight\n      const scrollPosition = window.scrollY\n      const scrollPercentage = (scrollPosition / totalScroll) * 100\n      \n      if (progressBarRef.current) {\n        progressBarRef.current.style.width = `${scrollPercentage}%`\n      }\n    }\n    window.addEventListener('scroll', handleScroll)\n    return () => window.removeEventListener('scroll', handleScroll)\n  }, [])\n  \n  // Only render full content after component mounts on client\n  if (!isMounted) {\n    return <div className=\"min-h-screen\"></div> // Empty placeholder during server render\n  }\n  \n  return (\n    <>\n      <Navbar progressBarRef={progressBarRef as RefObject<HTMLDivElement>} />\n      \n      <main>\n        <PersonalizationProvider>\n          <HomeContent \n            selectedAction={selectedAction} \n            savedChoices={savedChoices}\n            handleActionAndChoicesSave={handleActionAndChoicesSave}\n          />\n        </PersonalizationProvider>\n      </main>\n    </>\n  )\n}\n\n// This component allows us to access the personalization context\nfunction HomeContent({ \n  selectedAction, \n  savedChoices,\n  handleActionAndChoicesSave\n}: { \n  selectedAction: 'stay' | 'move' | null;\n  savedChoices: SavedChoices | null;\n  handleActionAndChoicesSave: (action: 'stay' | 'move', choices: SavedChoices) => void;\n}) {\n  // Now we can use the personalization context\n  const { data } = usePersonalization();\n  \n  // Add safety check for data\n  const safeAddress = data && data.address ? data.address : '';\n  \n  return (\n    <>\n      <section className=\"bg-white w-full\">\n        <div className=\"container mx-auto\">\n          <Welcome />\n        </div>\n      </section>\n      \n      <section className=\"bg-gray-100 w-full\">\n        <div className=\"container mx-auto\">\n          <PersonalizationQuiz />\n        </div>\n      </section>\n      \n      {/* Only render the map when we have mounted on client-side */}\n      <section className=\"bg-white w-full\">\n        <div className=\"container mx-auto\">\n          <div id=\"opportunity-map\" className=\"py-16\">\n            <h2 className=\"text-3xl font-bold mb-8 text-center\">Opportunity Map</h2>\n            <OpportunityMap address={safeAddress} />\n          </div>\n        </div>\n      </section>\n    </>\n  );\n}\n\nexport default Home"],"names":[],"mappings":";;;;AACA;AACA;AACA;AACA;AACA;AALA;;;;;;;;AAgBA,SAAS;IACP,MAAM,iBAAiB,CAAA,GAAA,qMAAA,CAAA,SAAM,AAAD,EAAkB;IAC9C,MAAM,CAAC,WAAW,aAAa,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAC3C,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAA0B;IAC7E,MAAM,CAAC,cAAc,gBAAgB,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAuB;IAEtE,mEAAmE;IACnE,MAAM,6BAA6B,CAAC,QAAyB;QAC3D,kBAAkB;QAClB,gBAAgB;IAClB;IAEA,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,aAAa;QAEb,MAAM,eAAe;YACnB,MAAM,cAAc,SAAS,eAAe,CAAC,YAAY,GAAG,OAAO,WAAW;YAC9E,MAAM,iBAAiB,OAAO,OAAO;YACrC,MAAM,mBAAmB,AAAC,iBAAiB,cAAe;YAE1D,IAAI,eAAe,OAAO,EAAE;gBAC1B,eAAe,OAAO,CAAC,KAAK,CAAC,KAAK,GAAG,GAAG,iBAAiB,CAAC,CAAC;YAC7D;QACF;QACA,OAAO,gBAAgB,CAAC,UAAU;QAClC,OAAO,IAAM,OAAO,mBAAmB,CAAC,UAAU;IACpD,GAAG,EAAE;IAEL,4DAA4D;IAC5D,IAAI,CAAC,WAAW;QACd,qBAAO,8OAAC;YAAI,WAAU;;;;;iBAAsB,yCAAyC;;IACvF;IAEA,qBACE;;0BACE,8OAAC,4HAAA,CAAA,UAAM;gBAAC,gBAAgB;;;;;;0BAExB,8OAAC;0BACC,cAAA,8OAAC,gIAAA,CAAA,0BAAuB;8BACtB,cAAA,8OAAC;wBACC,gBAAgB;wBAChB,cAAc;wBACd,4BAA4B;;;;;;;;;;;;;;;;;;AAMxC;AAEA,iEAAiE;AACjE,SAAS,YAAY,EACnB,cAAc,EACd,YAAY,EACZ,0BAA0B,EAK3B;IACC,6CAA6C;IAC7C,MAAM,EAAE,IAAI,EAAE,GAAG,CAAA,GAAA,gIAAA,CAAA,qBAAkB,AAAD;IAElC,4BAA4B;IAC5B,MAAM,cAAc,QAAQ,KAAK,OAAO,GAAG,KAAK,OAAO,GAAG;IAE1D,qBACE;;0BACE,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,6HAAA,CAAA,UAAO;;;;;;;;;;;;;;;0BAIZ,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC,gIAAA,CAAA,UAAmB;;;;;;;;;;;;;;;0BAKxB,8OAAC;gBAAQ,WAAU;0BACjB,cAAA,8OAAC;oBAAI,WAAU;8BACb,cAAA,8OAAC;wBAAI,IAAG;wBAAkB,WAAU;;0CAClC,8OAAC;gCAAG,WAAU;0CAAsC;;;;;;0CACpD,8OAAC,oIAAA,CAAA,UAAc;gCAAC,SAAS;;;;;;;;;;;;;;;;;;;;;;;;AAMrC;uCAEe"}},
    {"offset": {"line": 3298, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}